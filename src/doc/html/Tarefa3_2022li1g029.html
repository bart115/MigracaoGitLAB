<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Tarefa3_2022li1g029</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption empty">&nbsp;</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Vitor Miguel Almeida RIbeiro &lt;a104010@alunos.uminho.pt&gt;<br />Gon&#231;alo Freitas &lt;a104350@alunos.uminho.pt&gt;</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr></table><p class="caption">Tarefa3_2022li1g029</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>M&#243;dulo para a realiza&#231;&#227;o da Tarefa 3 do projeto de LI1 em 2022/23.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:posx">posx</a> :: <a href="LI12223.html#t:Jogo" title="LI12223">Jogo</a> -&gt; <a href="LI12223.html#t:Jogada" title="LI12223">Jogada</a> -&gt; Int</li><li class="src short"><a href="#v:posy">posy</a> :: <a href="LI12223.html#t:Jogo" title="LI12223">Jogo</a> -&gt; <a href="LI12223.html#t:Jogada" title="LI12223">Jogada</a> -&gt; Int</li><li class="src short"><a href="#v:hatronco">hatronco</a> :: Int -&gt; [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>] -&gt; Bool</li><li class="src short"><a href="#v:obsmove">obsmove</a> :: (<a href="LI12223.html#t:Terreno" title="LI12223">Terreno</a>, [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>]) -&gt; [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>]</li><li class="src short"><a href="#v:mapamove">mapamove</a> :: [(<a href="LI12223.html#t:Terreno" title="LI12223">Terreno</a>, [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>])] -&gt; [(<a href="LI12223.html#t:Terreno" title="LI12223">Terreno</a>, [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>])]</li><li class="src short"><a href="#v:numfilas">numfilas</a> :: <a href="LI12223.html#t:Mapa" title="LI12223">Mapa</a> -&gt; Int</li><li class="src short"><a href="#v:animaJogo">animaJogo</a> :: <a href="LI12223.html#t:Jogo" title="LI12223">Jogo</a> -&gt; <a href="LI12223.html#t:Jogada" title="LI12223">Jogada</a> -&gt; <a href="LI12223.html#t:Jogo" title="LI12223">Jogo</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:posx" class="def">posx</a> :: <a href="LI12223.html#t:Jogo" title="LI12223">Jogo</a> -&gt; <a href="LI12223.html#t:Jogada" title="LI12223">Jogada</a> -&gt; Int <a href="#v:posx" class="selflink">#</a></p><div class="doc"><p>Na realiza&#231;&#227;o desta tarefa criei uma s&#233;rie de fun&#231;&#245;es auxiliares com o objetivo de respeitar as regras estabelecidas no enunciado
A fun&#231;&#227;o posx calcula a posi&#231;&#227;o em x ap&#243;s a jogada e est&#225; definida por: </p><pre>posx::Jogo-&gt;Jogada-&gt;Int
posx (Jogo (Jogador (x,y)) (Mapa lar [])) Parado = x
posx (Jogo (Jogador (x,y)) (Mapa lar ((Rio v,obs):tf))) Parado |y==0 &amp;&amp; hatronco x obs = x+v
                                                               |otherwise = posx (Jogo (Jogador (x,y-1)) (Mapa lar tf)) Parado
posx (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) Parado = posx (Jogo (Jogador (x,y-1)) (Mapa lar tf)) Parado
posx (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) (Move Esquerda) =x-1
posx (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) (Move Direita)= x+1
posx (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) m =x
</pre></div></div><div class="top"><p class="src"><a id="v:posy" class="def">posy</a> :: <a href="LI12223.html#t:Jogo" title="LI12223">Jogo</a> -&gt; <a href="LI12223.html#t:Jogada" title="LI12223">Jogada</a> -&gt; Int <a href="#v:posy" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o posy calcula a posi&#231;&#227;o em y ap&#243;s a jogada e est&#225; definida por:</p><pre>posy::Jogo-&gt;Jogada-&gt;Int 
posy (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) (Move Baixo)  =(y-1)
posy (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) (Move Cima) |numfilas (Mapa lar ((te,obs):tf)) &gt; y =(y+1)
                                                                 |otherwise = y
posy (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) m = y
</pre></div></div><div class="top"><p class="src"><a id="v:hatronco" class="def">hatronco</a> :: Int -&gt; [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>] -&gt; Bool <a href="#v:hatronco" class="selflink">#</a></p><div class="doc"><p>A proxima fun&#231;&#227;o auxiliar tem como fun&#231;&#227;o verificar se na posi&#231;&#227;o do jogador se encontra um tronco</p><p>A fun&#231;&#227;o hatronco est&#225; definida por:</p><pre>hatronco::Int-&gt;[Obstaculo]-&gt;Bool
hatronco x [] =False
hatronco x (ob1:obs) |x==0 &amp;&amp; ob1==Tronco=True
                     |otherwise = hatronco (x-1) obs
</pre></div></div><div class="top"><p class="src"><a id="v:obsmove" class="def">obsmove</a> :: (<a href="LI12223.html#t:Terreno" title="LI12223">Terreno</a>, [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>]) -&gt; [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>] <a href="#v:obsmove" class="selflink">#</a></p><div class="doc"><p>Para dar movimento aos obstaculos fez-se as duas fun&#231;&#245;es auxiliares </p><p>A fun&#231;&#227;o obsmove move os obstaculo de uma &quot;linha&quot; do jogo e est&#225; definida por:</p><pre>obsmove::(Terreno,[Obstaculo])-&gt;[Obstaculo]
obsmove (Relva,obs) = obs
obsmove (Rio v,obs)  |v==0 = obs
                     |v&gt;0 = obsmove (Rio (v-1),(last obs : init obs ))
                     |otherwise= obsmove (Rio (v+1),tail obs ++ [head obs] )
obsmove (Estrada v,obs) |v==0 = obs
                        |v&gt;0 = obsmove (Estrada (v-1),last obs: init obs )
                        |otherwise = obsmove (Estrada (v+1),tail obs ++ [head obs])
</pre></div></div><div class="top"><p class="src"><a id="v:mapamove" class="def">mapamove</a> :: [(<a href="LI12223.html#t:Terreno" title="LI12223">Terreno</a>, [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>])] -&gt; [(<a href="LI12223.html#t:Terreno" title="LI12223">Terreno</a>, [<a href="LI12223.html#t:Obstaculo" title="LI12223">Obstaculo</a>])] <a href="#v:mapamove" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o mapamove usa a fun&#231;&#227;o obsmove para mover todos os obstaculos do mapa da seguinte forma: </p><pre>mapamove::[(Terreno,[Obstaculo])]-&gt;[(Terreno,[Obstaculo])]
mapamove [(te,obs)] = [(te,obsmove (te,obs))]
mapamove ((te,obs):fs) = (te,obsmove (te,obs)):mapamove fs
</pre></div></div><div class="top"><p class="src"><a id="v:numfilas" class="def">numfilas</a> :: <a href="LI12223.html#t:Mapa" title="LI12223">Mapa</a> -&gt; Int <a href="#v:numfilas" class="selflink">#</a></p><div class="doc"><p>Por fim , a fun&#231;&#227;o numfilas conta o numero de filas do mapa para impedir o jogador de avan&#231;ar se este estiver no limite superior do mapa</p><p>A fun&#231;&#227;o numfilas est&#225; definida por:</p><pre>numfilas::Mapa-&gt;Int
numfilas (Mapa l [])=0
numfilas (Mapa l (ob1:obs))=1+numfilas (Mapa l obs)
</pre></div></div><div class="top"><p class="src"><a id="v:animaJogo" class="def">animaJogo</a> :: <a href="LI12223.html#t:Jogo" title="LI12223">Jogo</a> -&gt; <a href="LI12223.html#t:Jogada" title="LI12223">Jogada</a> -&gt; <a href="LI12223.html#t:Jogo" title="LI12223">Jogo</a> <a href="#v:animaJogo" class="selflink">#</a></p><div class="doc"><p>Finalmente,a fun&#231;&#227;o <code><a href="Tarefa3_2022li1g029.html#v:animaJogo" title="Tarefa3_2022li1g029">animaJogo</a></code> d&#225; movimento tanto ao jogador como aos obstaculos do jogo.
A fun&#231;&#227;o est&#225; definida por:</p><pre>animaJogo :: Jogo -&gt; Jogada -&gt; Jogo
animaJogo (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) m  = Jogo (Jogador (px,py)) (Mapa lar (mapamove ((te,obs):tf)))
                                                                                     where px=posx (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) m
                                                                                           py=posy (Jogo (Jogador (x,y)) (Mapa lar ((te,obs):tf))) m 
</pre><h2>A fun&#231;&#227;o est&#225; preparada para funcionar em casos especificos como:</h2><ul><li>A jogada do jogador &#233; simplemente ficar parado.</li><li>Se a jogada do jogador &#233; ficar parado e o jogador est&#225; em cima de um tronco, o jogador acompanha o movimento do tronco</li><li>Se o jogador chegou ao limite do mapa , mesmo que receba a jogada para o jogador se mover para cima, o jogador fica no mesmo sitio</li></ul><h2>Exemplos de utiliza&#231;&#227;o para os casos especificos</h2><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>animaJogo (Jogo (Jogador (2,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Nenhum,Tronco,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])) Parado
</code></strong>Jogo (Jogador (2,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Tronco,Nenhum,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>animaJogo (Jogo (Jogador (1,1)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Nenhum,Tronco,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])) Parado
</code></strong>Jogo (Jogador (2,1)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Tronco,Nenhum,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>animaJogo (Jogo (Jogador (1,2)) (Mapa 4[(Rio (-1),[Tronco,Nenhum,Nenhum,Tronco),(Relva,[Nenhum,Nenhum,Nenhum,Nenhum]),(Relva,[Arvore,Nenhum,Nenhum,Arvore])])) (Move Cima)
</code></strong>Jogo (Jogador (1,2)) (Mapa 4[(Rio (-1),[Nenhum,Nenhum,Tronco,Tronco]),(Relva,[Nenhum,Nenhum,Nenhum,Nenhum]),(Relva,[Arvore,Nenhum,Nenhum,Arvore])])
</pre><h2>Exemplos de utiliza&#231;&#227;o para os diferentes movimentos</h2><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>animaJogo (Jogo (Jogador (2,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Nenhum,Tronco,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])) Parado
</code></strong>Jogo (Jogador (2,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Tronco,Nenhum,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>animaJogo (Jogo (Jogador (2,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Nenhum,Tronco,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])) (Move Cima)
</code></strong>Jogo (Jogador (2,3)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Tronco,Nenhum,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>animaJogo (Jogo (Jogador (2,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Nenhum,Tronco,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])) (Move Baixo)
</code></strong>Jogo (Jogador (2,1)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Tronco,Nenhum,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>animaJogo (Jogo (Jogador (2,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Nenhum,Tronco,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])) (Move esquerda)
</code></strong>Jogo (Jogador (1,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Tronco,Nenhum,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>animaJogo (Jogo (Jogador (2,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Nenhum,Tronco,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])) (Move Direita)
</code></strong>Jogo (Jogador (3,2)) (Mapa 3 [(Relva,[Arvore,Nenhum,Nenhum]),(Rio 1,[Tronco,Nenhum,Tronco]),(Relva,[Nenhum,Arvore,Nenhum])])
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>